{"version":3,"file":"ProfilePage-OTM5ziau.js","sources":["../../src/pages/ProfilePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../AuthContext';\nimport './ProfilePage.css';\n\nexport default function ProfilePage() {\n  const { user } = useAuth();\n  const [stats, setStats] = useState(null);\n  const [apiError, setApiError] = useState('');\n  const [apiRaw, setApiRaw] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchProfile() {\n      if (!user) return;\n      let statsData = null;\n      try {\n  const apiBase = import.meta.env.VITE_API_URL;\n        // Obtener el token de Firebase\n        const token = user && (await user.getIdToken());\n        const statsRes = await fetch(`${apiBase}/api/users/me/stats?uid=${user.uid}`,\n          {\n            headers: {\n              'Authorization': token ? `Bearer ${token}` : '',\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        if (statsRes.ok) {\n          statsData = await statsRes.json();\n          setApiRaw(statsData);\n        } else {\n          setApiError(`Error HTTP: ${statsRes.status}`);\n        }\n      } catch (err) {\n        setApiError('Error de conexión: ' + err.message);\n      }\n      setStats(statsData?.stats || null);\n      setLoading(false);\n    }\n    fetchProfile();\n  }, [user]);\n\n  if (loading) return null;\n  return (\n    <div className=\"profile-container\">\n      <div className=\"profile-card\">\n        <div className=\"profile-header\">\n          <img\n            src={`https://api.dicebear.com/7.x/identicon/svg?seed=${user?.uid || 'user'}`}\n            alt=\"avatar\"\n            className=\"profile-avatar\"\n          />\n          <div>\n            <h2>{user?.displayName || user?.email}</h2>\n            <span className=\"profile-uid\">UID: {user?.uid}</span>\n          </div>\n        </div>\n        <div className=\"profile-stats\">\n          <h3>Estadísticas</h3>\n          {apiError && (\n            <div className=\"error-message\">{apiError}</div>\n          )}\n          {stats ? (\n            <div className=\"stats-grid\">\n              <div className=\"stat-card\">\n                <span className=\"stat-label\">Partidas jugadas</span>\n                <span className=\"stat-value\">{stats.gamesPlayed}</span>\n              </div>\n              <div className=\"stat-card\">\n                <span className=\"stat-label\">Victorias</span>\n                <span className=\"stat-value\">{stats.wins}</span>\n              </div>\n              <div className=\"stat-card\">\n                <span className=\"stat-label\">Respuestas correctas</span>\n                <span className=\"stat-value\">{stats.correctAnswers}</span>\n              </div>\n            </div>\n          ) : (\n            <>\n              <p>No hay estadísticas.</p>\n              {apiRaw && (\n                <details>\n                  <summary>Respuesta de la API</summary>\n                  <pre>{JSON.stringify(apiRaw, null, 2)}</pre>\n                </details>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["ProfilePage","user","useAuth","stats","setStats","useState","apiError","setApiError","apiRaw","setApiRaw","loading","setLoading","useEffect","fetchProfile","statsData","apiBase","token","statsRes","err","jsxs","jsx","Fragment"],"mappings":"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"}