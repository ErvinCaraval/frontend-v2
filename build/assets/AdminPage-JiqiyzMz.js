import{r as c,j as e}from"./index-D5d0iPnG.js";class w{constructor(){this.data={users:new Map,games:new Map,questions:new Map}}collection(r){return{doc:n=>({get:()=>Promise.resolve({exists:this.data[r].has(n),data:()=>this.data[r].get(n)}),set:s=>(this.data[r].set(n,s),Promise.resolve()),update:s=>{const i=this.data[r].get(n)||{};return this.data[r].set(n,{...i,...s}),Promise.resolve()},delete:()=>(this.data[r].delete(n),Promise.resolve())}),add:n=>{const s="doc-"+Date.now()+"-"+Math.random().toString(36).substr(2,9);return this.data[r].set(s,n),Promise.resolve({id:s})},get:()=>Promise.resolve({docs:Array.from(this.data[r].entries()).map(([n,s])=>({id:n,data:()=>s}))})}}}const l=new w,p={text:"",options:["","","",""],correctAnswerIndex:0,category:"",explanation:""};function A(){const[j,r]=c.useState([]),[n,s]=c.useState(p),[i,h]=c.useState(null),[m,g]=c.useState(!0),u=async()=>{g(!0);const t=await l.collection("questions").get();r(t.docs.map(o=>({id:o.id,...o.data()}))),g(!1)};c.useEffect(()=>{u()},[]);const x=t=>{const{name:o,value:a}=t.target;s(d=>({...d,[o]:a}))},v=(t,o)=>{s(a=>{const d=[...a.options];return d[t]=o,{...a,options:d}})},y=async t=>{t.preventDefault(),i?await l.collection("questions").doc(i).update(n):await l.collection("questions").add(n),s(p),h(null),u()},C=t=>{s(t),h(t.id)},b=async t=>{await l.collection("questions").doc(t).delete(),u()};return e.jsxs("div",{children:[e.jsx("h2",{children:"Admin Panel"}),e.jsxs("form",{onSubmit:y,children:[e.jsx("input",{name:"text",value:n.text,onChange:x,placeholder:"Question text",required:!0}),e.jsx("input",{name:"category",value:n.category,onChange:x,placeholder:"Category",required:!0}),e.jsx("input",{name:"explanation",value:n.explanation,onChange:x,placeholder:"Explanation",required:!0}),n.options.map((t,o)=>e.jsxs("div",{children:[e.jsx("input",{value:t,onChange:a=>v(o,a.target.value),placeholder:`Option ${o+1}`,required:!0}),e.jsx("input",{type:"radio",name:"correctAnswerIndex",checked:n.correctAnswerIndex===o,onChange:()=>s(a=>({...a,correctAnswerIndex:o}))})," Correct"]},o)),e.jsxs("button",{type:"submit",children:[i?"Update":"Add"," Question"]}),i&&e.jsx("button",{type:"button",onClick:()=>{s(p),h(null)},children:"Cancel"})]}),e.jsx("hr",{}),e.jsx("h3",{children:"Questions"}),m?e.jsx("p",{children:"Loading..."}):e.jsxs("table",{border:"1",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Text"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Options"}),e.jsx("th",{children:"Correct"}),e.jsx("th",{children:"Explanation"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.text}),e.jsx("td",{children:t.category}),e.jsx("td",{children:t.options.join(", ")}),e.jsx("td",{children:t.options[t.correctAnswerIndex]}),e.jsx("td",{children:t.explanation}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>C(t),children:"Edit"}),e.jsx("button",{onClick:()=>b(t.id),children:"Delete"})]})]},t.id))})]})]})}export{A as default};
//# sourceMappingURL=AdminPage-JiqiyzMz.js.map
