import{u as x,r as t,j as s}from"./index-D5d0iPnG.js";function N(){const{user:a}=x(),[i,h]=t.useState(null),[c,n]=t.useState(""),[d,p]=t.useState(null),[m,j]=t.useState(!0);return t.useEffect(()=>{async function u(){if(!a)return;let e=null;try{const r="https://backend-v1-2nej.onrender.com",o=a&&await a.getIdToken(),l=await fetch(`${r}/api/users/me/stats?uid=${a.uid}`,{headers:{Authorization:o?`Bearer ${o}`:"","Content-Type":"application/json"}});l.ok?(e=await l.json(),p(e)):n(`Error HTTP: ${l.status}`)}catch(r){n("Error de conexión: "+r.message)}h((e==null?void 0:e.stats)||null),j(!1)}u()},[a]),m?null:s.jsx("div",{className:"profile-container",children:s.jsxs("div",{className:"profile-card",children:[s.jsxs("div",{className:"profile-header",children:[s.jsx("img",{src:`https://api.dicebear.com/7.x/identicon/svg?seed=${(a==null?void 0:a.uid)||"user"}`,alt:"avatar",className:"profile-avatar"}),s.jsxs("div",{children:[s.jsx("h2",{children:(a==null?void 0:a.displayName)||(a==null?void 0:a.email)}),s.jsxs("span",{className:"profile-uid",children:["UID: ",a==null?void 0:a.uid]})]})]}),s.jsxs("div",{className:"profile-stats",children:[s.jsx("h3",{children:"Estadísticas"}),c&&s.jsx("div",{className:"error-message",children:c}),i?s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("span",{className:"stat-label",children:"Partidas jugadas"}),s.jsx("span",{className:"stat-value",children:i.gamesPlayed})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("span",{className:"stat-label",children:"Victorias"}),s.jsx("span",{className:"stat-value",children:i.wins})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("span",{className:"stat-label",children:"Respuestas correctas"}),s.jsx("span",{className:"stat-value",children:i.correctAnswers})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"No hay estadísticas."}),d&&s.jsxs("details",{children:[s.jsx("summary",{children:"Respuesta de la API"}),s.jsx("pre",{children:JSON.stringify(d,null,2)})]})]})]})]})})}export{N as default};
//# sourceMappingURL=ProfilePage-OTM5ziau.js.map
